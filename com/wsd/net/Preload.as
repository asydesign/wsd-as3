package com.wsd.net{	import com.wsd.Base;		import flash.events.Event;	import flash.events.ProgressEvent;	import flash.display.Loader;	import flash.net.URLRequest;		public class Preload	{		private var loader:Loader;		private var container:*;				public function Preload(url, container):void		{			Base.log('Preload::constructor(url: ' + url + ' container: ' + container + ')');						this.container = container;			loader = new Loader();			loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, progressHandler);			loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);			loader.load(new URLRequest(url));		}				private function progressHandler( e:ProgressEvent ):void		{			var percent = Math.floor(e.bytesLoaded / e.bytesTotal * 100) + '%';			Base.log('Preload::progressHandler(' + percent + ')');			if (percent == 'Infinity%') percent = 'Cargando...';			container.txtLoading.text = percent;		}				private function completeHandler( e:Event ):void		{			Base.log('Preload::completeHandler()');						loader.removeEventListener(ProgressEvent.PROGRESS, progressHandler);			loader.removeEventListener(Event.COMPLETE, completeHandler);						while(container.numChildren>0)			{				container.removeChildAt(container.numChildren-1);			}						container.addChild(loader);		}	}}